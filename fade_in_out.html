<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fade outinn</title>
    <style>
        button{
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">Fade out</button>
 <script>
     var fadeObj=document.getElementById("fade-obj");
     var fadeBtn=document.getElementById("fade-btn");     
     var i=1;
     var out;      /*must set up as global varible!!! outside the functions!!!!!*/
     var inn;      /*must set up as global varible!!! outside the functions!!!!!*/
     fadeBtn.onclick=function(){
        var txt=fadeBtn.innerHTML;
        switch(txt){
            case "Fade out":
            out=setInterval('fadeOut()',100);      
            setTimeout("fadeBtn.innerHTML='Fade in',fadeBtn.disabled=false,clearInterval(out)",1100);  
            break;
            case "Fade in":
            inn=setInterval('fadeIn()',100);  
            setTimeout("fadeBtn.innerHTML='Fade out',fadeBtn.disabled=false,clearInterval(inn)",1100);
            break;
        }
     }
     function fadeOut(){
         fadeObj.style.backgroundColor='rgba(0,0,0,'+i+')';
         fadeBtn.disabled=true;
         i=i-0.1;
     }
     function fadeIn(){         
        fadeObj.style.backgroundColor='rgba(0,0,0,'+i+')';   
        fadeBtn.disabled=true; 
         i=i+0.1;
     }
 </script>
</body>
</html>